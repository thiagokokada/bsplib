.TH "bspprof" 1 "1.4 25/9/98" "Oxford BSP Toolset"
.SH NAME
bspprof \- The Oxford BSP Toolset communication profiler for BSPlib

.SH SYNOPSIS
.B bspprof
.RI "[" "input-file" "] [" "output-file" "] "
.RI "[" "command-line-options" "]"

.SH DESCRIPTION
The Oxford BSP toolset communication profiler analyses trace files
generated during the execution of a BSPlib program. The profiler
converts trace files into PostScript (level 2) documents that are suitable for
visualisation on a wide variety of graphical devices. Trace files are
generated by adding the option
.I -prof
when compiling BSPlib programs with
.B bspfront(1)\c
\&. 
.PP 
The profiler produces three types of PostScript graphs as output:

.IP 1)
.RI Strata-graphs 
for either the number of distinct communications that
occur over time, or the number of bytes communicated. Two graphs are
presented per profile:
.RS
.IP a)
the number of bytes (or communications) going 
.B in
to a processor.
.IP b)
the number of bytes (or communications) going 
.B out
from a processor.
.RE

.IP 2)
.I Prediction graphs
that are similar to
.I 1)
except that the lower graph shows the predicted cost of the
communication on the machine the profiler was run on. If the 
.I \-arch
command is used to specify another architecture, then that
architectures BSP parameters will be used instead. Alternatively, the
BSP parameters of the architecture which the prediction is for can be
entered using the 
.RI \-slg 
option.

.IP 3)
A 
.I G graph,
which is also based upon
.I 1)
except the bottom graph shows the effect of g over time. For a true
BSP machine, g should be constant.
.RE

.SH OPTIONS
Options must be separate: `\|\c
.B \-dr\c
\&\|' is quite different from `\|\c
.B \-d \-r
\&\|'.
Here is a summary of all the options, grouped by type. Explanations
can be found in the appropriate sections below:

.hy 0
.na
.TP
.B Overall Options
.RI "\-title " string
.RI "\-zoom " "from,to"
\-colo[u]r
\-letter
\-bytes
\-packets
\-ignore
\-outline
.TP
.B Strata Graph Options
\-comm
.TP
.B Prediction Graph Options
\-predict
.RI "\-slg " s,l,g,[nhalf]
.RI "\-arch " string
\-nhalfmodel
\-hgmodel
\-bisselingmodel 
.TP
.B G Graph
\-ggraph
.RI "\-ceilingg " integer
\-hrelgl
.ad b
.hy 1

.SH OVERALL OPTIONS

.TP 
.BI "\-t " string
Use 
.I string
as the title of the profile.
.TP
.BI "\-zoom " "from,to"
Zoom in on the section of the profile between times (in seconds)
.I from
and 
.I to\c
\&.  If a superstep stradles either 
.I from
or
.I to 
it is ignored.
.TP
.B \-colo[u]r
Use coloured bars when producing the profile in preference to the
default grey-scale hashing. 
.TP 
.B \-letter
Generate a postscript file that will print on American 
.I letter
format paper. The default print area is A4.
.TP
.B \-bytes
Displays the number of bytes transferred from each process during each
superstep.
.TP
.B \-packets
Displays the number of distinct messages from each process during each
superstep.
.TP
.BI "\-ignore " file
Don't profile any supersteps from the file
.I string.
.TP
.B \-outline
Only show the accumulated message sizes for a superstep. This option
is useful to see the general shape of the profile without generating
large postscript files.
.PP

.SH STRATA GRAPH OPTIONS
.TP
.B \-comm
Produce a strata-graph showing two graphs with the amounts of data
entering and exiting each processor for each superstep over time.
.PP

.SH PREDICTION GRAPH OPTIONS
.TP 
.B \-predict
Produce a graph that contrasts the experimental results with a
prediction based upon the BSP cost model.
.TP 
.BI "\-slg " s,l,g[,nhalf]
When generating the prediction profile, the options to 
.I \-slg
are numbers which represent the BSP parameters:
.RS
.TP 
.I s
is the 
.I Megaflop/s 
rating for the machine.
.TP 
.I l
the minimum number of flops for a barrier synchronisation.
.TP 
.I g
the asymptotic number of flops required for all processors to
communicate a single 32bit word to another process.
.TP 
.I nhalf
the number of words required for the communication performance to
deteriorate to 2g.
.RE
See 
.I bspparam(1)
for information concerning the BSP parameter database.
.TP 
.BI "\-arch " string
Specifies that the program was run on architecture 
.I string\c
; where 
.I string 
is one of the valid architecture options that is returned from 
.B bsparch \-help\c
\&.
.TP
.B \-hgmodel
The formula h.g is used as the cost of  communicating a h-relation.
.TP
.B \-nhalfmodel 
The formula h.g.(nhalf/h +1) is used as the cost of communicating a
h-relation. i.e., messages smaller than nhalf are attributed a larger
cost to take into effect communication startup costs. This is the most
accurate, and therefore the 
.B default
cost model used in the profiler.
.TP
.B \-bisselingmodel
The formula h.g.nhalf is used as the cost of  communicating a
h-relation. This will give an upper bound, pessimistic cost of
communication.
.PP

.SH G GRAPH
.TP
.B \-ggraph
For each superstep, assume that l is fixed, and plot a graph for the
variance of g realised for the superstep. Although the BSP model
assumes a fixed g, this option is useful when trying to visualise the
effects of contention in the implementation; or alternatively to check
if a machine is truly scalable!
.TP
.BI "\-ceilingg " number
Specify the maximum value of g to show in the lower G graph. This
option is useful when useful when trying to scale multiple graphs to
the same ranges.
.TP
.B -hrelgl
In the ggraph, we assume that l is constant, and we plot the variance
of g. When the size of the h-relation is much smaller than l/g, then a
small variance at runtime in l will produce a large variance in g. By
default, when generating the profile for the G graph, h-relations
smaller than l/g are
.I ignored. 
With this option, they are plotted as small white dots.
.PP

.SH FILES

The file \fIROOTDIR\fR/include/bsp_parameters.ascii contains the BSP
parameters for various platforms; where 
.I ROOTDIR
is usually set in the top level Makefile of the BSPlib source.

.SH  "SEE ALSO"
bsplib(3), bspfront(1), bsparch(1)

.I ``The theory, practice, and a tool for BSP performance prediction''
Jonathan Hill, Paul Crumpton, and David Burgess. In EuroPar'96. LNCS,
Springer-Verlag, August 1996. See:
.br
.I ftp://ftp.comlab.ox.ac.uk/pub/Documents/techpapers/Jonathan.Hill/HillCrumptonBurgess_europar96.ps.Z

The Oxford BSP toolset web pages can be found  at:
.br
.I http://www.bsp-worldwide.org/implmnts/oxtool/

.SH BUGS
Problems and bug reports should be mailed to 
.I bsplib-bugs@comlab.ox.ac.uk


.SH COPYING
Copyright 1995,1996,1997 University of Oxford
.PP
Permission to use, copy, modify, and distribute this software,  
and to incorporate it, in whole or in part, into other software,
is hereby granted without fee, provided that:                    
.IP i
the above copyright notice and this permission notice appear in all
copies of the source code, and the above copyright notice appear in
clearly visible form on all supporting documentation   and
distribution media;
.IP ii
 modified versions of this software be accompanied by a complete
change history describing author, date, and modifications made; 

.IP iii
 and any redistribution of the software, in original or modified
form, be without fee and subject to these same conditions.
.LP

.SH AUTHORS
Jonathan.Hill@comlab.ox.ac.uk
.PP
.B http://www.comlab.ox.ac.uk/oucl/people/jonathan.hill.html

